<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manipulation Task Gallery</title>
    <style>
        /* ── Reset & Base ── */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #f5f6fa;
            color: #2c2c2c;
            line-height: 1.5;
            padding: 0 0 60px;
        }

        /* ── Page Header ── */
        .page-header {
            text-align: center;
            padding: 48px 20px 32px;
            background: linear-gradient(135deg, #ffffff 0%, #eef0f7 100%);
            border-bottom: 1px solid #dde0ea;
        }
        .page-header h1 {
            font-size: 2.4rem;
            font-weight: 700;
            color: #1a1a2e;
            letter-spacing: -0.02em;
        }
        .page-header p {
            margin-top: 8px;
            font-size: 1.05rem;
            color: #6b7194;
        }

        /* ── Level Section ── */
        .level-section {
            max-width: 1600px;
            margin: 40px auto 0;
            padding: 0 24px;
        }
        .level-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: #fff;
            padding: 12px 20px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 20px;
        }
        .level-1 .level-title { background: linear-gradient(135deg, #22c55e, #16a34a); }
        .level-2 .level-title { background: linear-gradient(135deg, #eab308, #ca8a04); }
        .level-3 .level-title { background: linear-gradient(135deg, #f97316, #ea580c); }
        .level-4 .level-title { background: linear-gradient(135deg, #ef4444, #dc2626); }

        /* ── Type Row ── */
        .type-group {
            margin-bottom: 24px;
        }
        .type-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: #3a3f5c;
            margin-bottom: 12px;
            padding-left: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .type-label .badge {
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            padding: 3px 10px;
            border-radius: 4px;
            color: #fff;
        }
        .badge-rigid   { background: #2563eb; }
        .badge-deform  { background: #9333ea; }

        /* ── Grid (4 columns) ── */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        /* ── Card ── */
        .card {
            background: #ffffff;
            border: 1px solid #dde0ea;
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            border-color: #b0b8d0;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        }

        /* Card header */
        .card-header {
            padding: 10px 14px 6px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .card-category {
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #8a8fa8;
        }
        .card-task-name {
            font-size: 0.88rem;
            font-weight: 600;
            color: #2c2c2c;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Dropdown select */
        .card-select-wrapper {
            padding: 0 14px 8px;
        }
        .card-select {
            width: 100%;
            padding: 6px 10px;
            font-size: 0.8rem;
            color: #3a3f5c;
            background: #f5f6fa;
            border: 1px solid #dde0ea;
            border-radius: 6px;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%238a8fa8' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 28px;
        }
        .card-select:focus {
            outline: none;
            border-color: #4f6bf0;
        }

        /* Video container */
        .card-video-wrapper {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 */
            background: #e8eaf0;
        }
        .card-video-wrapper video,
        .card-video-wrapper .no-video-img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ── Responsive ── */
        @media (max-width: 1200px) {
            .card-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 640px) {
            .card-grid { grid-template-columns: 1fr; }
            .page-header h1 { font-size: 1.6rem; }
        }
    </style>
</head>
<body>

<div class="page-header">
    <h1>ManiLadder Task Demo Gallery</h1>
</div>

<script>
// ── Video data ──
const VIDEO_DATA = {
    rigid_body: {
        single_arm_gripper: {
            1: ["OpenDoor-V1", "PickPlacePen-V1", "PushSoccer-V1", "StackBlock-V1"],
            2: ["KitAssembly-v1", "OpenBoxRetrieval-v1", "PivotBook-v1", "HangMug-v1"],
            3: ["GroceryPrepare-v1", "MazeBallPush-v1", "PushTargetPose-v1", "Stack8Blocks-v1"],
            4: ["FlipPan-v1", "HitBilliard-v1", "PingPongBallTransport-v1", "RingTossing-v1"]
        },
        single_arm_dexterous: {
            1: ["GraspCylinder-v1", "LiftBucket-v1", "ReorientCube-v1", "TurnOnFaucet-v1"],
            2: ["GraspTwoBlocks-v1", "HammerNail-v1", "DexOpenDoor-v1", "ReorientPen-v1"],
            3: ["ClutterGrasp-v1", "HammerNailOut-v1", "MobilePickPlace-v1", "TweezersPickPlace-v1"],
            4: ["FitnessBall-v1", "RodThroughHoles-v1", "SpinPen-v1", "TennisRally-v1"]
        },
        dual_arm_gripper: {
            1: ["DualArmButtonPress-v1", "DualArmHammerHandover-v1", "DualArmLiftBall-v1", "DualArmPushBox-v1"],
            2: ["DualArmBookPickPlace-v1", "DualArmCleanupPotEnv-v1", "DualArmDoubleDoorBox-v1", "DualArmPeginHole-v1"],
            3: ["DualArmFoldCarton-v1", "DualArmMahjongSetup-v1", "DualArmOpenFridge-v1", "DualArmMakeLine-v1"],
            4: ["DualArmBallClassify-v1", "DualArmBilliardBridge-v1", "DualArmOrganizeCabinet-v1", "DualArmRubikCube-v1"]
        },
        dual_arm_dexterous: {
            1: ["DualArmOpenPen-v1", "DualArmOpenScissor-v1", "DualArmPressButton-v1", "DualArmSwingCup-v1"],
            2: ["DualArmFlipTable-v1", "DualArmOpenBottle-v1", "DualArmOpenLaptop-v1", "DualArmThrowBall-v1"],
            3: ["DualArmPingpongBalance-v1", "DualArmPlugCharger-v1", "DualArmSetupTable-v1"],
            4: ["DualArmJugglingBall-v1", "DualArmKeyboardType-v1", "DualArmSendPingPong-v1", "DualArmShootBasketball-v1"]
        }
    },
    deformable_object: {
        single_arm_gripper: {
            1: ["StraightenRope-v1", "UnfoldHandkerchief-v1", "UnfoldShirt-v1", "ShapeTToI-v1"],
            2: ["StraightenTwoRopesSequential-v1", "FoldShirt-v1", "ScoopWater-v1"],
            3: ["SeparateTwoRopesEnv-v1", "BagLift-v1", "LiquidMeasuring-v1"],
            4: ["WrapRope-v1", "BuildTent-v1", "StampRoll-v1"]
        },
        single_arm_dexterous: {
            1: ["RopePalmCageHoldDex-v1", "DrapeCloth-v1", "SqueezeClay-v1"],
            2: ["RopeBridgeDex-v1", "ClothWipe-v1", "RollingPin-v1"],
            3: ["HitBoxEnv-v1", "BagDropIn-v1", "PickSoftFromClutter-v5"],
            4: ["SwingRing-v1", "CoverPattern-v1", "ClayMolding-v1"]
        },
        dual_arm_gripper: {
            1: ["RopeCylinderWarpping-v1", "FoldHandKerchief-v1", "PouringWater-v1"],
            2: ["StraightenRopeDual-v1", "ClothAlign-v1", "PushObject-v1"],
            3: ["ThreadRopeThroughTube-v1", "FlattenShirt-v1", "ShapeDoll-v1"],
            4: ["WallRings-v1", "ClothHanger-v1", "LiquidMixing-v1"]
        },
        dual_arm_dexterous: {
            1: ["RopeStretch-v1", "CoverCloth-v1", "LiftSoftDex-v1"],
            2: ["PlaceRopeOverRod-v1", "StuffCloth-v1", "PouringTwoCups-v1"],
            3: ["RopeScissorCut-v1", "ThreadCloth-v1", "WrapCupClay-v1"],
            4: ["JumpRope-v1", "BagBlockLift-v1", "SandShovel-v1"]
        }
    }
};

const CATEGORY_LABELS = {
    single_arm_gripper:   "Single-Arm Gripper",
    single_arm_dexterous: "Single-Arm Dexterous",
    dual_arm_gripper:     "Dual-Arm Gripper",
    dual_arm_dexterous:   "Dual-Arm Dexterous"
};

const TYPE_LABELS = {
    rigid_body:        "Rigid Body Manipulation",
    deformable_object: "Deformable Object Manipulation"
};

const CATEGORIES = ["single_arm_gripper", "single_arm_dexterous", "dual_arm_gripper", "dual_arm_dexterous"];
const TYPES = ["rigid_body", "deformable_object"];

// Tasks that have real video files (copied from real_videos)
const TASKS_WITH_VIDEO = new Set([
    // Rigid body - Level 1
    "OpenDoor-V1", "PickPlacePen-V1", "PushSoccer-V1", "StackBlock-V1",
    "GraspCylinder-v1", "LiftBucket-v1", "ReorientCube-v1", "TurnOnFaucet-v1",
    "DualArmButtonPress-v1", "DualArmHammerHandover-v1", "DualArmLiftBall-v1", "DualArmPushBox-v1",
    "DualArmOpenPen-v1", "DualArmOpenScissor-v1",
    // Rigid body - Level 2
    "KitAssembly-v1", "OpenBoxRetrieval-v1", "PivotBook-v1", "HangMug-v1",
    "GraspTwoBlocks-v1", "HammerNail-v1", "DexOpenDoor-v1", "ReorientPen-v1",
    "DualArmBookPickPlace-v1", "DualArmCleanupPotEnv-v1", "DualArmPeginHole-v1",
    "DualArmFlipTable-v1", "DualArmOpenLaptop-v1",
    // Rigid body - Level 3
    "MazeBallPush-v1", "PushTargetPose-v1",
    "ClutterGrasp-v1", "HammerNailOut-v1", "TweezersPickPlace-v1",
    // Rigid body - Level 4
    "FlipPan-v1", "RingTossing-v1",
    "RodThroughHoles-v1", "TennisRally-v1",
    // Deformable object - Level 1
    "StraightenRope-v1", "UnfoldHandkerchief-v1", "UnfoldShirt-v1", "ShapeTToI-v1",
    "RopePalmCageHoldDex-v1", "SqueezeClay-v1",
    "RopeCylinderWarpping-v1", "PouringWater-v1",
    "RopeStretch-v1", "CoverCloth-v1", "LiftSoftDex-v1",
    // Deformable object - Level 2
    "StraightenTwoRopesSequential-v1", "FoldShirt-v1", "ScoopWater-v1",
    "RopeBridgeDex-v1", "ClothWipe-v1", "RollingPin-v1",
    "StraightenRopeDual-v1", "ClothAlign-v1", "PushObject-v1",
    // Deformable object - Level 3
    "SeparateTwoRopesEnv-v1", "LiquidMeasuring-v1",
    "HitBoxEnv-v1", "BagDropIn-v1", "PickSoftFromClutter-v5",
    // Deformable object - Level 4
    "BuildTent-v1"
]);

function prettify(name) {
    return name;
}

function hasVideo(task) {
    return TASKS_WITH_VIDEO.has(task);
}

function videoPath(type, level, category, task) {
    return `videos/${type}/level_${level}/${category}/${task}.mp4`;
}

// SVG data URI for "No Video" placeholder
const NO_VIDEO_SVG = `data:image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360" viewBox="0 0 640 360">
  <rect width="640" height="360" fill="#e8eaf0"/>
  <g transform="translate(320,155)" text-anchor="middle">
    <path d="M-28,-30 L28,-30 L28,20 L-28,20 Z M32,-24 L48,-34 L48,14 L32,4 Z" fill="none" stroke="#b0b8d0" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
    <line x1="-36" y1="-38" x2="56" y2="22" stroke="#b0b8d0" stroke-width="3" stroke-linecap="round"/>
  </g>
  <text x="320" y="220" text-anchor="middle" font-family="Segoe UI,system-ui,sans-serif" font-size="22" font-weight="600" fill="#8a8fa8">No Video Available</text>
</svg>`)}`;

function buildPage() {
    for (let level = 1; level <= 4; level++) {
        const section = document.createElement('div');
        section.className = `level-section level-${level}`;

        const title = document.createElement('h2');
        title.className = 'level-title';
        title.textContent = `Level ${level}`;
        section.appendChild(title);

        for (const type of TYPES) {
            const typeGroup = document.createElement('div');
            typeGroup.className = 'type-group';

            const typeLabel = document.createElement('div');
            typeLabel.className = 'type-label';
            const badge = document.createElement('span');
            badge.className = `badge ${type === 'rigid_body' ? 'badge-rigid' : 'badge-deform'}`;
            badge.textContent = type === 'rigid_body' ? 'Rigid' : 'Deform';
            typeLabel.appendChild(badge);
            typeLabel.appendChild(document.createTextNode(TYPE_LABELS[type]));
            typeGroup.appendChild(typeLabel);

            const grid = document.createElement('div');
            grid.className = 'card-grid';

            for (const cat of CATEGORIES) {
                const tasks = VIDEO_DATA[type][cat][level];
                const defaultTask = tasks[0];

                const card = document.createElement('div');
                card.className = 'card';

                // Header
                const header = document.createElement('div');
                header.className = 'card-header';

                const catLabel = document.createElement('div');
                catLabel.className = 'card-category';
                catLabel.textContent = CATEGORY_LABELS[cat];
                header.appendChild(catLabel);

                const taskName = document.createElement('div');
                taskName.className = 'card-task-name';
                taskName.textContent = prettify(defaultTask);
                header.appendChild(taskName);

                card.appendChild(header);

                // Select
                const selectWrapper = document.createElement('div');
                selectWrapper.className = 'card-select-wrapper';

                const select = document.createElement('select');
                select.className = 'card-select';
                for (const t of tasks) {
                    const opt = document.createElement('option');
                    opt.value = t;
                    opt.textContent = hasVideo(t) ? prettify(t) : prettify(t) + ' (no video)';
                    select.appendChild(opt);
                }
                selectWrapper.appendChild(select);
                card.appendChild(selectWrapper);

                // Video / Placeholder
                const videoWrapper = document.createElement('div');
                videoWrapper.className = 'card-video-wrapper';

                const video = document.createElement('video');
                const placeholder = document.createElement('img');
                placeholder.src = NO_VIDEO_SVG;
                placeholder.className = 'no-video-img';

                if (hasVideo(defaultTask)) {
                    video.src = videoPath(type, level, cat, defaultTask);
                    video.muted = true;
                    video.loop = true;
                    video.autoplay = true;
                    video.playsInline = true;
                    video.preload = 'metadata';
                    videoWrapper.appendChild(video);
                } else {
                    videoWrapper.appendChild(placeholder);
                }
                card.appendChild(videoWrapper);

                // Wire up select
                select.addEventListener('change', () => {
                    const chosen = select.value;
                    taskName.textContent = prettify(chosen);
                    videoWrapper.innerHTML = '';
                    if (hasVideo(chosen)) {
                        video.src = videoPath(type, level, cat, chosen);
                        video.muted = true;
                        video.loop = true;
                        video.autoplay = true;
                        video.playsInline = true;
                        video.load();
                        video.play();
                        videoWrapper.appendChild(video);
                    } else {
                        videoWrapper.appendChild(placeholder);
                    }
                });

                grid.appendChild(card);
            }

            typeGroup.appendChild(grid);
            section.appendChild(typeGroup);
        }

        document.body.appendChild(section);
    }
}

document.addEventListener('DOMContentLoaded', buildPage);
</script>

</body>
</html>
